var axios=require("axios"),cheerio=require("cheerio"),express=require("express"),app=express();app.use(express.urlencoded({extended:!0})),app.use(express.json());var urlToScrape="https://www.dailykos.com",scraperController=function(res){axios.get(urlToScrape).then(function(response){var $=cheerio.load(response.data),result=[];$("div.story").each(function(i,element){var headline=$(element).find("a.designation-staff").text(),link=$(element).find("a.designation-staff").attr("href"),storyImg=$(element).find("div.story-image").find("img").attr("src");console.log("storyImg: ",storyImg),""!==headline&&result.push({headline:headline,link:urlToScrape+link,storyImg:storyImg})}),console.log(result),res.json(result)})};module.exports=scraperController;